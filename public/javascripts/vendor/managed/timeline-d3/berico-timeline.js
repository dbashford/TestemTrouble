(function () {
define('app/timeline/event-dispatcher',[],function(){var t;return t=function(){function t(){}var e;return e={},t.prototype.on=function(t,n){return e[t]||(e[t]=[]),e[t].push(n)},t.prototype.off=function(t,n){var i;if(null==n&&(n=null),this.hasListener(t)){if(null==n)return e[t]=null;if(i=e[t].indexOf(n),i>-1)return e[t].splice(i,1)}},t.prototype.hasListener=function(t){return e[t]&&e[t].length>0},t.prototype.dispatchEvent=function(t,n){var i,r,o,u,a;if(this.hasListener(t)){for(u=e[t],a=[],r=0,o=u.length;o>r;r++)i=u[r],a.push(i.apply(null,[n]));return a}},t.prototype.removeAllListeners=function(){return e={}},t}()});
var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define('app/timeline/toolbar_view',["jquery","./event-dispatcher"],function(t,e){var n,i;return n=function(e){function n(){return this.onToggleClick=__bind(this.onToggleClick,this),this.onClick=__bind(this.onClick,this),i=n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.prototype.render=function(t){return t.append('<section id="timeline-toolbar" class="timeline-toolbar">\n  <div id="timeline-toggle-notes" class="timeline-toolbar-button" title="Toggle User Notes" data-event="toggleUserNotes">T</div>\n  <div id="timeline-add-note" class="timeline-toolbar-button" title="Add Note" data-event="addUserNote">A</div>\n  <div id="timeline-reset" class="timeline-toolbar-button" title="Reset" data-event="reset">R</div>\n  <div id="timeline-next" class="timeline-toolbar-button" title="Zoom In" data-event="zoomIn">+</div>\n  <div id="timeline-previous" class="timeline-toolbar-button" title="Zoom Out" data-event="zoomOut">-</div>\n</section>'),this.postRender(),this},n.prototype.postRender=function(){return t("#timeline-toggle-notes").on("click",this.onToggleClick),t("#timeline-add-note").on("click",this.onToggleClick),t("#timeline-reset").on("click",this.onClick),t("#timeline-next").on("click",this.onClick),t("#timeline-previous").on("click",this.onClick)},n.prototype.onClick=function(t){return this.dispatchEvent(t.target.getAttribute("data-event"))},n.prototype.onToggleClick=function(e){return t(e.target).toggleClass("toggled"),this.onClick(e)},n}(e)});
var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define('app/timeline/add_event_view',["./event-dispatcher"],function(t){var e;return e=function(t){function e(t){this.rootDOMElement=t,this.onCancel=__bind(this.onCancel,this),this.onSave=__bind(this.onSave,this),this.render()}return __extends(e,t),e.prototype.render=function(){return $(this.rootDOMElement).append('<section class="addEventWrapper">\n  <div class="borderContainer dropshadow">\n    <div class="mainContainer">\n      <label for="eventTitle">Title: </label>\n      <input id="eventTitle" type="text" tabindex="1" />\n      <br/>\n      <label for="eventDate">Date: </label>\n      <input id="eventDate" type="date" />\n      <br/>\n      <label for="eventText">Description: </label>\n      <textarea id="eventText" tabindex="2"></textarea>\n    </div>\n    <button id="addEventCancel" class="button">Cancel</button>\n    <button id="addEventSave" class="button" tabindex="3">Save</button>\n  </div>\n  <div class="arrow"></div>\n</section>'),this.postRender(),this},e.prototype.postRender=function(){var t,e,n,r,i;return $("#addEventSave").on("click",this.onSave),$("#addEventCancel").on("click",this.onCancel),t=new Date,e=t.getDate(),n=t.getMonth()+1,i=t.getFullYear(),10>n&&(n="0"+n),10>e&&(e="0"+e),r=i+"-"+n+"-"+e,$("#eventDate").val(r),$("#eventTitle").focus()},e.prototype.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=0|16*Math.random(),n="x"===t?e:8|3&e,n.toString(16)})},e.prototype.getData=function(){return{id:this.uuid(),title:$("#eventTitle").val(),start:new Date($("#eventDate").val()),text:$("#eventText").val(),type:"note",userGenerated:!0}},e.prototype.remove=function(){return $("#addEventSave").off("click"),$("#addEventCancel").off("click"),$(".addEventWrapper").remove()},e.prototype.onSave=function(){return this.dispatchEvent("addEventSave",this.getData())},e.prototype.onCancel=function(){return this.dispatchEvent("addEventCancel")},e}(t)});
var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define('app/timeline/tooltip_view',["jquery","./event-dispatcher"],function(t,e){var n;return n=function(e){function n(t,e){this.el=t,this.data=e,this.onStar=__bind(this.onStar,this),this.onShow=__bind(this.onShow,this),this.onEdit=__bind(this.onEdit,this),this.onMouseout=__bind(this.onMouseout,this),this.onMouseover=__bind(this.onMouseover,this),this.id=(new Date).getTime(),this.render()}var i;return __extends(n,e),i=!1,n.prototype.render=function(){var e;return e="<div id='"+this.id+"' class='timeline-tooltip'>                <div class='ttContent'>                    <p id='text' class='text' title='"+this.data.text+"'>"+this.data.text+"<span class='ellipses'>...</span></p>                    <div class='ttButtons'>                        <div class='ttBtn edit'>                            <p class='btnText'>Edit</p>                        </div>                        <div class='ttBtn show'>                            <p class='btnText'>"+(this.data.hide?"Show":"Hide")+"</p>                        </div>                        <div class='ttBtn star'>                            <p class='btnText'>Star</p>                        </div>                    </div>                </div>                <div class='ttArrow'></div>              </div>",t("#timeline-container").append(e),this.postRender(),this},n.prototype.postRender=function(){var e,n,i,o,r,s;return n=t("#text").get(0),n&&(r=n.scrollHeight,i=n.getBoundingClientRect().height,i>=r&&t(".ellipses").hide()),t("#"+this.id+" .edit").on("click",this.onEdit),t("#"+this.id+" .show").on("click",this.onShow),t("#"+this.id+" .star").on("click",this.onStar),t("#"+this.id).on("mouseover",this.onMouseover),t("#"+this.id).on("mouseout",this.onMouseout),e=this.el.getBoundingClientRect(),s=e.top-115+5,o=e.left-25,t("#"+this.id).hide().css("left",o+"px").css("top",s+"px").fadeIn()},n.prototype.remove=function(){var e=this;return setTimeout(function(){return i?void 0:(t("#"+e.id+" .edit").off("click"),t("#"+e.id+" .show").off("click"),t("#"+e.id+" .star").off("click"),t("#"+e.id).fadeOut("fast",function(){return t(this).remove()}),e.dispatchEvent("removed"))},100)},n.prototype.onMouseover=function(){return i=!0},n.prototype.onMouseout=function(){return i=!1,this.remove()},n.prototype.onEdit=function(){return this.dispatchEvent("editData",this.data)},n.prototype.onShow=function(){return this.dispatchEvent("toggleVisibility",this.data)},n.prototype.onStar=function(){return this.dispatchEvent("markAsFavorite",this.data)},n}(e)});
var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define('app/timeline/timeline',["./event-dispatcher","./toolbar_view","./add_event_view","./tooltip_view","d3"],function(t,e,n,i){var o,r,exports,s;return exports={},r=function(t){function o(){return this.showTooltip=__bind(this.showTooltip,this),this.popupClass=__bind(this.popupClass,this),this.rootDOMElement=__bind(this.rootDOMElement,this),this.selectedItem=__bind(this.selectedItem,this),this.numberOfLanes=__bind(this.numberOfLanes,this),this.data=__bind(this.data,this),this.onToggleUserNotes=__bind(this.onToggleUserNotes,this),this.onZoomOut=__bind(this.onZoomOut,this),this.onZoomIn=__bind(this.onZoomIn,this),this.onReset=__bind(this.onReset,this),this.onAddEventCancel=__bind(this.onAddEventCancel,this),this.onAddEventSave=__bind(this.onAddEventSave,this),this.onAddUserNote=__bind(this.onAddUserNote,this),this.onMarkAsFavorite=__bind(this.onMarkAsFavorite,this),this.onToggleVisibility=__bind(this.onToggleVisibility,this),this.onEditData=__bind(this.onEditData,this),this.previousItem=__bind(this.previousItem,this),this.nextItem=__bind(this.nextItem,this),this.addItem=__bind(this.addItem,this),this.zoom=__bind(this.zoom,this),this.centerElement=__bind(this.centerElement,this),this.reset=__bind(this.reset,this),this.draw=__bind(this.draw,this),this.drawBaseChart=__bind(this.drawBaseChart,this),this.createTimeline=__bind(this.createTimeline,this),s=o.__super__.constructor.apply(this,arguments)}var r,a,l,h;return __extends(o,t),o.prototype._numberOfLanes=4,o.prototype._data=null,o.prototype._parsedData=null,o.prototype._selectedItem=null,o.prototype._rootDOMElement=null,o.prototype._popupClass=n,o.prototype._showTooltip=!0,o.prototype.addToLane=function(t,e){var n,i;return n=e.lane,t.lanes[n]||(t.lanes[n]=[]),i=t.lanes[n],i.push(e)},o.prototype.parseData=function(t){var e,n,i,o,r;for(n=0,o=0,r=t.length,e={lanes:{}};r>n;)i=t[n],i.index=n,i.lane=o,this.addToLane(e,i),n++,o<this.numberOfLanes()-1?o++:o=0;return this.collapseLanes(e)},o.prototype.collapseLanes=function(t){var e,n,i,o,r;r=[],n=[];for(o in t.lanes)for(i=t.lanes[o],e=0,r.push({id:o,label:o});e<i.length;)n.push(i[e]),e++;return{lanes:r,items:n}},l=0,r=function(t,e){return clearTimeout(l),l=setTimeout(t,e)},o.prototype.createTimeline=function(t){var n,i,o=this;return this.rootDOMElement()||this.rootDOMElement("body"),null!=t&&this.data(t),n=this._parsedData.items,this.x=d3.time.scale().domain([d3.time.sunday(d3.min(n,function(t){return t.start})),d3.max(n,function(t){return t.start})]),this.y=d3.scale.linear().domain([0,this.numberOfLanes()]),this.zoom=d3.behavior.zoom().on("zoom",this.zoom),d3.select(this.rootDOMElement()).append("section").attr("id","timeline-container").attr("class","timeline-container"),this.drawBaseChart(),i=(new e).render($("#timeline-container")),i.on("reset",this.onReset),i.on("zoomIn",this.onZoomIn),i.on("zoomOut",this.onZoomOut),i.on("toggleUserNotes",this.onToggleUserNotes),i.on("addUserNote",this.onAddUserNote),window.onresize=function(){return r(o.drawBaseChart,250)}},o.prototype.drawBaseChart=function(){var t,e,n,i,o,r,s,a=this;return t=$("#timeline-container"),t.find(".chart").remove(),n=this._parsedData.lanes,r=t[0].getBoundingClientRect(),s=r.width,this.x.range([0,s]),e=200,i=e-30,this.y.range([0,i]),this.zoom.x(this.x),this.chart=d3.select("#timeline-container").append("svg:svg").attr("width",s).attr("height",e).attr("class","chart"),this.chart.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",s).attr("height",i),this.main=this.chart.append("g").attr("width",s).attr("height",i).attr("class","main"),this.main.append("svg:rect").attr("class","fillOverlay").attr("width",s).attr("height",i),this.main.append("g").selectAll(".laneLines").data(n).enter().append("svg:line").attr("x1",0).attr("y1",function(t){return d3.round(a.y(t.id))+.5}).attr("x2",s).attr("y2",function(t){return d3.round(a.y(t.id))+.5}).attr("class","laneLines"),this.xDateAxis=d3.svg.axis().scale(this.x).orient("bottom").tickSize(12,6,0),this.main.append("svg:g").attr("transform","translate(0,"+i+")").attr("class","main axis date").call(this.xDateAxis),this.main.append("svg:rect").attr("class","overlay").attr("width",s).attr("height",i).call(this.zoom),this.itemRects=this.main.append("svg:g").attr("clip-path","url(#clip)"),this.main.append("svg:line").attr("y1",0).attr("y2",0).attr("x1",0).attr("x2",s).attr("class","shadow"),this.main.append("svg:line").attr("y1",0).attr("y2",i).attr("x1",.5*s+.25).attr("x2",.5*s+.25).attr("class","todayLine").attr("clip-path","url(#clip)"),this.main.append("svg:polygon").attr("points",""+(.5*s-10)+",0 "+(.5*s+10)+",0 "+.5*s+",10").attr("class","triangle"),o=this.data()[this.data().length-1],this.selectedItem(o),this.centerElement(o)},o.prototype.draw=function(t){var e,n,i,o,r,s,l,h,d=this;return null==t&&(t=null),s=void 0,i=void 0,n=this._parsedData.items,r=d3.time.day(this.x.domain()[0]),o=d3.time.day(this.x.domain()[1]),h=n.filter(function(t){return t.start<o&&t.start>r}),o-r>470916e5?this.xDateAxis.ticks(d3.time.years,1).tickFormat(d3.time.format("%Y")).tickSubdivide(11):o-r>124e8?this.xDateAxis.ticks(d3.time.months,1).tickFormat(d3.time.format("%B")).tickSubdivide(3):o-r>24e8?this.xDateAxis.ticks(d3.time.mondays,1).tickFormat(d3.time.format("%b %e")).tickSubdivide(6):o-r>48e7?this.xDateAxis.ticks(d3.time.days,1).tickFormat(d3.time.format("%b %e")).tickSubdivide(11):this.xDateAxis.ticks(d3.time.days,1).tickFormat(d3.time.format("%b %e")).tickSubdivide(23),t?this.main.select(".main.axis.date").transition().duration(500).call(this.xDateAxis):this.main.select(".main.axis.date").call(this.xDateAxis),s=this.itemRects.selectAll(".mainItem").data(h,function(t){return t.id}),e=this,l=s.enter().append("g").attr("class",function(t){return"mainItem "+t.type}).attr("transform",function(e){var n;return n=d.chart.attr("width"),"right"===t?"translate(-150,"+(d.y(e.lane)+.1*d.y(1)+.5)+")":"left"===t?"translate("+n+","+(d.y(e.lane)+.1*d.y(1)+.5)+")":"translate("+d.x(e.start)+","+(d.y(e.lane)+.1*d.y(1)+.5)+")"}).style("opacity",function(t){return t.userGenerated?a:1}).on("mouseover",function(t){return d3.select(this).classed("hover",!0),e.showTooltip()?e.createTooltip(this,t):void 0}).on("mouseout",function(){return d3.select(this).classed("hover",!1),e.showTooltip()?e.removeAllTooltips():void 0}).on("click",function(t){return d.selectedItem(t),d.dispatchEvent("selectionUpdate",t),d.centerElement(t)}),l.append("rect").attr("width",150).attr("height",function(){return.8*d.y(1)}),l.append("path").attr("width",30).attr("height",30).attr("d",function(t){return"note"===t.type?"M7.75 2.001c.693-.021 1.312.259 1.855.767 3.797 3.542 7.596 7.084 11.403 10.613.263.244.617.375.923.569.221.14.455.27.641.454.431.428.842.881 1.251 1.334.592.654.653 1.318.239 2.122-.446.867-.692 1.805-.424 2.774.146.531.394 1.084.738 1.486 1.031 1.199 2.128 2.333 3.208 3.483.286.306.505.63.378 1.078-.127.45-.467.587-.873.657-1.107.191-2.212.403-3.314.624-.521.104-.937-.011-1.295-.461l-1.125-1.229c-.883-1.115-2.032-1.255-3.262-1.035-.502.089-.99.299-1.47.499-.597.248-1.319.128-1.778-.364-.43-.458-.865-.911-1.264-1.397-.188-.229-.303-.525-.443-.798-.132-.253-.213-.55-.385-.763-3.316-4.108-6.646-8.206-9.969-12.308-1.096-1.354-1.04-2.938.148-4.22.939-1.013 1.885-2.019 2.827-3.029.54-.579 1.191-.868 1.991-.856zm6.21 19.202l6.041-6.403-.481-.459c-1.449-1.351-2.898-2.701-4.349-4.052-2.194-2.044-4.385-4.09-6.583-6.128-.629-.585-1.126-.615-1.652-.068-.995 1.033-1.972 2.084-2.937 3.148-.454.5-.45 1.056-.049 1.603.139.189.289.37.437.552 1.508 1.863 3.018 3.725 4.527 5.586l5.046 6.221zm8.731 1.584c-.973-1.861-1.028-3.542-.229-5.519.059-.146.055-.403-.029-.519-.289-.387-.623-.731-.918-1.065l-6.649 7.141.587.678 3.016-3.193c.295-.312.576-.643.885-.938.344-.328.826-.314 1.129-.003.326.337.338.851.013 1.246-.206.249-.435.478-.653.715l-1.949 2.108c.741 0 1.332-.071 1.898.021.586.095 1.148.35 1.729.537l1.17-1.209zm.061 2.558c.314.282.605.757.938.791.547.059 1.119-.17 1.678-.275l-1.574-1.671-1.042 1.155z":"M22 8.184v0zM23.729 19.064c-.683.695-1.369 1.41-2.039 2.119-.1.108-.154.367-.156.526-.016 1.187-.01 2.481-.012 3.669 0 .133-.01-.379-.017.621h-17.505v-21.567s2.718-.02 3.975-.006c.071.002.364.129.385.222.195.868.73 1.363 1.6 1.375 1.987.026 3.979-.028 5.966-.055.826-.01 1.447-.676 1.562-1.447.041-.272.156-.528.385-.524l4.127.002v4.001l.009-.032c.599-.593.896-1.283 1.771-1.492.051-.011.113-.106.113-.162-.017-.828.06-1.677-.086-2.484-.214-1.189-1.179-1.83-2.5-1.83h-16.719c-.186 0-.371.007-.556.023-1.115.104-2.032 1.123-2.032 2.262 0 7.143 0 14.283.003 21.427 0 .173.014.354.059.521.309 1.125 1.207 1.764 2.496 1.766 5.586.002 11.168.003 16.752-.002.271 0 .547-.016.808-.083 1.108-.287 1.774-1.205 1.78-2.46.009-2.054.002-4.104.002-6.156l-.024-.366-.147.132zM27.654 10.896c-.721-.797-1.471-1.566-2.254-2.295-.629-.586-1.215-.517-1.817.094-2.576 2.626-5.125 5.282-7.746 7.864-.929.916-1.578 1.89-1.815 3.201-.213 1.174-.58 2.323-.892 3.518l.251-.021c1.606-.436 3.215-.871 4.819-1.312.135-.035.272-.117.37-.221 3.011-3.057 6.017-6.121 9.019-9.187.509-.525.557-1.1.065-1.641zm-13.519 11.5l.436-1.696 1.191 1.255-1.627.441zm10.205-10.522c-.639.667-1.29 1.324-1.936 1.98-1.773 1.809-3.545 3.614-5.316 5.423l-.27.322c-.324-.349-.611-.654-.916-.973l.236-.254c2.365-2.413 4.734-4.825 7.096-7.244.188-.19.363-.334.645-.245.322.104.531.328.607.65.024.099-.064.255-.146.341zM19.432 10.258c.077-.395.021-1.256.021-1.256h-13.453v1.775l.319.027c4.091.003 8.398.005 12.488.001.343 0 .572-.268.625-.547zM13.002 17.002h-7.002v2h6.481c.176-1 .344-2 .521-2zM6 23.001h5.476c.152-1 .303-2 .457-2h-5.933v2zM15.205 14.692c.553-.55 1.094-.691 1.684-1.691h-10.889v1.712c0 .013.329.034.379.033 2.779.003 5.776.011 8.555.006.09 0 .211-.001.271-.06z"}),l.append("text").attr("x","40").attr("y","1.6em").text(function(t){return t.title}),t&&l.transition().duration(500).attr("transform",function(t){return"translate("+d.x(t.start)+","+(d.y(t.lane)+.1*d.y(1)+.5)+")"}),t?s.order().transition().duration(500).attr("transform",function(t){return"translate("+d.x(t.start)+","+(d.y(t.lane)+.1*d.y(1)+.5)+")"}):s.order().attr("transform",function(t){return"translate("+d.x(t.start)+","+(d.y(t.lane)+.1*d.y(1)+.5)+")"}),t?s.exit().transition().duration(500).attr("transform",function(t){return"translate("+d.x(t.start)+","+(d.y(t.lane)+.1*d.y(1)+.5)+")"}).remove():s.exit().remove()},o.prototype.reset=function(){return this.onReset()},o.prototype.centerElement=function(t){var e,n,i,o,r,s;return clearTimeout(this.showTooltipTimer),e=this.x.invert(.5*this.x.range()[1]),o=t.start,r=o-e,s=new Date(this.x.domain()[0]).getTime()+r,i=new Date(this.x.domain()[1]).getTime()+r,this.x.domain([s,i]),this.zoom.x(this.x),n=0>r?"right":"left",this.draw(n)},o.prototype.zoom=function(){return this.draw()},o.prototype.zoomIn=function(){var t;return console.log("zoom in"),t=this.zoom.scale(),console.log("val",t),this.zoom.scale(t+.5),console.log("val",this.zoom.scale()),this.draw(!0)},o.prototype.zoomOut=function(){var t;return console.log("zoom out"),t=this.zoom.scale(),console.log("val",t),this.zoom.scale(t-.5),console.log("val",this.zoom.scale()),this.draw(!0)},o.prototype.addItem=function(t){return this._data.push(t),this._parsedData=this.parseData(this._data),this.draw()},o.prototype.nextItem=function(){var t,e,n;return n=this.selectedItem().index,n+=1,t=this.data(),n<t.length?(e=t[n],this.selectedItem(e),this.dispatchEvent("selectionUpdate",e),this.centerElement(e)):void 0},o.prototype.previousItem=function(){var t,e;return e=this.selectedItem().index,e-=1,e>=0?(t=this.data()[e],this.selectedItem(t),this.dispatchEvent("selectionUpdate",t),this.centerElement(t)):void 0},h={},o.prototype.createTooltip=function(t,e){var n=this;return this.showTooltipTimer=setTimeout(function(){var o;return o=new i(t,e),o.on("editData",n.onEditData),o.on("toggleVisibility",n.onToggleVisibility),o.on("markAsFavorite",n.onMarkAsFavorite),o.on("removed",function(){return o.off("editData"),o.off("toggleVisibility"),o.off("markAsFavorite"),o.off("removed"),o=null}),h[o.id]=o},1500)},o.prototype.onEditData=function(t){return console.log("editData",t)},o.prototype.onToggleVisibility=function(t){return console.log("toggleVisibility",t)},o.prototype.onMarkAsFavorite=function(t){return console.log("markAsFavorite",t)},o.prototype.removeAllTooltips=function(){var t,e;clearTimeout(this.showTooltipTimer),e=[];for(t in h)h[t].remove(),h[t]=null,e.push(delete h[t]);return e},o.prototype.onAddUserNote=function(){var t,e,n,i;return this.popup=new this._popupClass(this.rootDOMElement()),t=$(".addEventWrapper"),e=$("#timeline-toolbar")[0].getBoundingClientRect(),n=e.width+e.left-5,i=Math.round(e.top+.5*e.height-.5*parseFloat(t.css("height"))),t.css("left",n).css("top",i),this.popup.on("addEventSave",this.onAddEventSave),this.popup.on("addEventCancel",this.onAddEventCancel)},o.prototype.onAddEventSave=function(t){return this.addItem(t),this.popup.off("addEventSave",this.onAddEventSave),this.popup.off("addEventCancel",this.onAddEventCancel),$("#timeline-add-note").removeClass("toggled"),this.popup.remove(),this.popup=null},o.prototype.onAddEventCancel=function(){return this.popup.off("addEventSave",this.onAddEventSave),this.popup.off("addEventCancel",this.onAddEventCancel),$("#timeline-add-note").removeClass("toggled"),this.popup.remove(),this.popup=null},o.prototype.onReset=function(){var t;return this.x.domain([d3.time.sunday(d3.min(this._data,function(t){return t.start})),d3.max(this._data,function(t){return t.start})]),this.zoom.x(this.x),this.draw(),t=this._data[this._data.length-1],this.selectedItem(t),this.dispatchEvent("selectionUpdate",t),this.centerElement(t)},o.prototype.onZoomIn=function(){return this.zoomIn()},o.prototype.onZoomOut=function(){return this.zoomOut()},a=1,o.prototype.onToggleUserNotes=function(){return a=a?0:1,d3.selectAll(d3.selectAll(".mainItem.note").filter(function(t){return t.userGenerated})[0]).style("pointer-events",function(){return a?"all":"none"}).transition().style("opacity",a)},o.prototype.data=function(t){return null!=t?(this._data=t,this._parsedData=this.parseData(t)):this._data},o.prototype.numberOfLanes=function(t){return null!=t?this._numberOfLanes=t:this._numberOfLanes},o.prototype.selectedItem=function(t){return null!=t?this._selectedItem=t:this._selectedItem},o.prototype.rootDOMElement=function(t){return null!=t?this._rootDOMElement=t:this._rootDOMElement},o.prototype.popupClass=function(t){return null!=t?this._popupClass=t:this._popupClass},o.prototype.showTooltip=function(t){return null!=t?this._showTooltip=t:this._showTooltip},o}.call(this,t),o=new r,this.exports={createTimeline:o.createTimeline,centerElement:o.centerElement,nextItem:o.nextItem,previousItem:o.previousItem,addItem:o.addItem,on:o.on,off:o.off,data:o.data,reset:o.reset,selectedItem:o.selectedItem,rootDOMElement:o.rootDOMElement,popupClass:o.popupClass},this.exports});define(['app/timeline/timeline'], function(lib) {
  return lib;
});
})()